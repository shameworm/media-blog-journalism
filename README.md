# Медіа Блог Журналістика

Система для управління біографіями українських журналістів, студентськими рефлексіями та великими журналістськими проектами з вбудованою системою workflow для перевірки та схвалення контенту.

## Структура Проекту

```
media-blog-journalism/
├── studio-media-blog-journalism/     # Sanity Studio CMS
│   ├── schemaTypes/                  # Схеми контенту
│   │   ├── teamMemberType.ts         # Члени команди
│   │   ├── biographyType.ts          # Біографії журналістів
│   │   ├── reflectionType.ts         # Рефлексії (есе студентів)
│   │   ├── largeProjectType.ts       # Великі проекти
│   │   └── postType.ts               # Пости (оригінальний тип)
│   ├── documentActions/              # Custom workflow actions
│   │   └── workflowActions.ts        # Дії для зміни статусу
│   ├── structure/                    # Custom navigation
│   │   └── index.ts                  # Структура з фільтрами
│   └── sanity.config.ts              # Конфігурація Studio
│
└── nextjs-media-blog-journalism/     # Next.js Frontend
    ├── src/
    │   ├── app/
    │   │   ├── biographies/          # Сторінки біографій
    │   │   ├── reflections/          # Сторінки рефлексій
    │   │   ├── projects/             # Сторінки проектів
    │   │   └── page.tsx              # Головна сторінка
    │   └── sanity/
    │       ├── client.ts             # Sanity client
    │       └── queries.ts            # GROQ queries
    └── package.json
```

## Функціонал

### 4 Типи Контенту

1. **Члени Команди** (`teamMember`)
   - Фото, ПІБ, роль, контактна інформація
   - Соціальні мережі
   - Коротка біографія

2. **Біографії Журналістів** (`biography`)
   - Фото, ПІБ
   - Дата і місце народження
   - Дата і місце загибелі (опціонально)
   - Освіта (масив)
   - Місця роботи (масив)
   - Нагороди (масив)
   - Rich text біографія з вбудованими фото та посиланнями на джерела
   - **Workflow:** статус, коментарі, історія змін

3. **Рефлексії** (`reflection`)
   - Назва есе
   - Ім'я студента та email
   - Посилання на біографію журналіста
   - Rich text есе
   - Оцінка від головного редактора
   - **Workflow:** статус, коментарі, історія змін
   - **Можливість кількох есе від одного студента**

4. **Великі Проекти** (`largeProject`)
   - Назва та опис проекту
   - Обкладинка
   - **Масив співавторів** (ім'я, роль, email)
   - Rich text контент з фото
   - Дати початку та завершення
   - **Workflow:** статус, коментарі, історія змін

### Система Workflow

#### Статуси:
- **Чернетка** (draft) - Початковий статус, документ у роботі
- **На Розгляді** (in_review) - Відправлено головному редактору
- **Потребує Змін** (changes_requested) - Повернуто з коментарями
- **Схвалено** (approved) - Схвалено головним редактором
- **Опубліковано** (published) - Опубліковано на сайті

#### Ролі користувачів:
- **Головний Редактор**: Перегляд, коментування, схвалення/відхилення
- **Редактор/Студент**: Створення та редагування контенту

#### Custom Actions у Sanity Studio:
- "Відправити на Розгляд" (draft → in_review)
- "Схвалити" (in_review → approved)
- "Повернути на Доопрацювання" (in_review → changes_requested)
- "Опублікувати" (approved → published)

## Налаштування та Запуск

### Передумови
- Node.js 18+
- npm або yarn

### 1. Встановлення залежностей

#### Sanity Studio:
```bash
cd studio-media-blog-journalism
npm install
```

#### Next.js Frontend:
```bash
cd nextjs-media-blog-journalism
npm install
```

### 2. Запуск Sanity Studio

```bash
cd studio-media-blog-journalism
npm run dev
```

Studio буде доступна за адресою: `http://localhost:3333`

### 3. Запуск Next.js

```bash
cd nextjs-media-blog-journalism
npm run dev
```

Сайт буде доступний за адресою: `http://localhost:3000`

## Використання

### Створення Біографії

1. Відкрийте Sanity Studio
2. Перейдіть до "Біографії Журналістів"
3. Натисніть "Create" → оберіть "Biography"
4. Заповніть всі поля
5. У полі "Біографія" можна вбудовувати фото з джерелами
6. Статус автоматично встановлюється на "Чернетка"
7. Коли готово → натисніть "Відправити на Розгляд"

### Створення Рефлексії

1. Студент створює нову рефлексію
2. Обирає журналіста з випадаючого списку (reference)
3. Пише есе
4. Відправляє на розгляд головному редактору
5. Головний редактор може:
   - Схвалити та поставити оцінку
   - Повернути з коментарями

### Створення Великого Проекту

1. Створіть новий Large Project
2. Додайте назву та опис
3. **Додайте всіх співавторів** (обов'язково мінімум 1)
   - Ім'я, роль, email кожного
4. Напишіть контент проекту
5. Відправте на розгляд

### Робота Головного Редактора

1. У Studio відкрийте розділ "На Розгляді"
2. Виберіть документ для перевірки
3. Прочитайте контент
4. Додайте коментарі (у полі "Коментарі")
5. Оберіть дію:
   - "Схвалити" - якщо все добре
   - "Повернути на Доопрацювання" - якщо потрібні зміни

### Фільтрація за Статусами

У Sanity Studio ліва панель організована з фільтрами:
- **На Розгляді** - всі документи для перевірки
- Кожен тип має розділи по статусах:
  - Чернетки
  - На Розгляді
  - Потребує Змін
  - Схвалені
  - Опубліковані

## Frontend Сторінки

- `/` - Головна сторінка з featured контентом
- `/biographies` - Список всіх опублікованих біографій
- `/biographies/[slug]` - Окрема біографія з повною інформацією
- `/reflections` - Список всіх рефлексій
- `/reflections/[slug]` - Окреме есе
- `/projects` - Список великих проектів
- `/projects/[slug]` - Окремий проект з командою

## Санity Project

- **Project ID:** `irtwns5j`
- **Dataset:** `production`
- **Studio URL:** [Manage Project](https://sanity.io/manage)

## Додаткові Можливості

### Управління Користувачами

Користувачі управляються через Sanity Dashboard:
1. Перейдіть до [sanity.io/manage](https://sanity.io/manage)
2. Виберіть проект
3. Розділ "Members" → запросіть користувачів
4. Призначте ролі (Editor або Administrator)

### Історія Змін

Кожен документ з workflow зберігає історію змін статусу:
- Хто змінив
- Коли змінив
- Новий статус
- Примітка

### Коментарі

Система коментарів дозволяє:
- Додавати коментарі до документів
- Позначати коментарі як "Вирішено"
- Бачити автора та дату коментаря

## Troubleshooting

### Studio не запускається
```bash
cd studio-media-blog-journalism
rm -rf node_modules package-lock.json
npm install
npm run dev
```

### Next.js не може підключитися до Sanity
Перевірте:
- `projectId` у `src/sanity/client.ts`
- `dataset` має бути `production`
- API version актуальна

## Розробка

### Додавання нових полів

1. Відредагуйте відповідний schema файл у `studio-media-blog-journalism/schemaTypes/`
2. Перезапустіть Studio
3. Оновіть GROQ queries у `nextjs-media-blog-journalism/src/sanity/queries.ts`
4. Оновіть Next.js сторінки для відображення нових полів

### Додавання нових статусів

1. Додайте статус у schema (наприклад, `biographyType.ts`)
2. Оновіть `documentActions/workflowActions.ts`
3. Додайте фільтр у `structure/index.ts`

## Технології

- **CMS:** Sanity v4
- **Frontend:** Next.js 16 (App Router)
- **Styling:** Tailwind CSS v4
- **Rich Text:** Portable Text
- **Image Handling:** @sanity/image-url

## Ліцензія

Проект для освітніх цілей.
